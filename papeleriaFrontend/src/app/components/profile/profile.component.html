<div class="profile-container">
    <h2 class="text-2xl font-bold">Mi Perfil</h2>

    <div *ngIf="loading" class="loading-spinner">
      Cargando perfil...
    </div>

    <div *ngIf="user && !loading">

      <div *ngIf="!editMode" class="profile-view">
        <div class="profile-info">
          <p><strong>👤 Nombre:</strong> {{ user.nombre }}</p>
          <p><strong>📧 Email:</strong> {{ user.email }}</p>
          <p><strong>📞 Teléfono:</strong> {{ user.telefono }}</p>
          <p><strong>🏠 Dirección:</strong> {{ user.direccion }}</p>
        </div>
  
        <button class="btn-primary" (click)="toggleEditMode()" aria-label="Editar Perfil">
          Editar Perfil
        </button>
        <button class="btn-secondary" (click)="logout()" aria-label="Cerrar Sesión">
          Cerrar Sesión
        </button>

        <button routerLink="/metodos-pago" class="btn-primary" style="margin-top: 20px; margin-left: 10px;">Métodos de Pago</button>
      </div>
  
      <div *ngIf="editMode" class="profile-edit">
        <form (ngSubmit)="saveProfile()">
          <div class="form-group">
            <label for="nombre">Nombre</label>
            <input type="text" id="nombre" [(ngModel)]="user.nombre" name="nombre" required>
          </div>
  
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" [(ngModel)]="user.email" name="email" required>
          </div>
  
          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input type="tel" id="telefono" [(ngModel)]="user.telefono" name="telefono">
          </div>
  
          <div class="form-group">
            <label for="direccion">Dirección</label>
            <input type="text" id="direccion" [(ngModel)]="user.direccion" name="direccion">
          </div>
  
          <div class="form-actions">
            <button type="button" class="btn-secondary" (click)="toggleEditMode()" aria-label="Cancelar">
              Cancelar
            </button>
            <button type="submit" class="btn-primary">
              Guardar Cambios
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
